!function(e,t){"undefined"!=typeof module?module.exports=t():"function"==typeof define&&"object"==typeof define.amd?define(t):this[e]=t()}("litebox",function(){function e(e){return function(t){27===t.key&&e.hide()}}function t(e,t,i){var r=this,n=function(t){return i.call(r,e,t)};e.addEventListener(t,n)}function i(t,i){var r={prefix:"litebox",maxWidth:1/0,useTitle:!0};this.options="object"==typeof i?i:{};for(var n in r)r.hasOwnProperty(n)&&!this.options.hasOwnProperty(n)&&(this.options[n]=r[n]);return this._wrapper=null,this._figure=null,this.escListener=e(this),t&&this.add(t),this}var r=window.document;return i.prototype.sizeFigure=function(e){var t=e.width,i=e.height,r=Math.min(this.options.maxWidth,this.wrapper().style.width.replace("px","")),n=this.figure();n.style.width=(r>t?t:r)+"px",n.style.height=(r>t?i:r/t*i)+"px"},i.prototype.wrapper=function(){return this._wrapper||this.create()},i.prototype.figure=function(){return this._figure||this.wrapper().getElementsByTagName("figure").item(0)},i.prototype.show=function(e,i){var n=e.href||e.dataset.img||!1;if(!n)return!1;var s=this.wrapper(),p=this.figure(),a=s.getElementsByTagName("div").item(0),o=p.getElementsByTagName("figcaption").item(0);i.preventDefault(),p.style.display="none",s.style.display=a.style.display="block";var h=this.options.useTitle?e.title:e.dataset.caption;h?(o.style.display="block",o.innerHTML=h):(o.style.display="none",o.innerHTML="");var l=r.createElement("img");t.call(this,l,"load",this.sizeFigure),t.call(this,l,"load",function(){p.style.display="block"}),l.src=n,p.insertBefore(l,o),r.addEventListener("keypress",this.escListener)},i.prototype.hide=function(){var e=this.figure();this.wrapper().style.display="none",e.removeChild(e.getElementsByTagName("img").item(0)),r.removeEventListener("keypress",this.escListener)},i.prototype.sizeWrapper=function(){var e=this.wrapper();e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px"},i.prototype.create=function(){this._wrapper=r.createElement("div"),this._wrapper.className=this.options.prefix+"-wrapper",this.sizeWrapper(),t.call(this,this._wrapper,"click",this.hide),t.call(this,window,"resize",this.sizeWrapper),r.body.insertBefore(this._wrapper,r.body.firstChild);var e=r.createElement("div");return e.className=this.options.prefix+"-loading",this._wrapper.appendChild(e),loader=r.createElement("div"),loader.innerText="Loading...",e.appendChild(loader),this._figure=r.createElement("figure"),this._wrapper.appendChild(this._figure),this._figure.appendChild(r.createElement("figcaption")),this._wrapper},i.prototype.add=function(e){try{t.call(this,e,"click",this.show)}catch(e){}return e},i}),!function(e){e.extend(e.fn,{litebox:function(t){var i=new litebox(t);return e.each(this,function(e,t){i.add(t)}),this}})}(Zepto);