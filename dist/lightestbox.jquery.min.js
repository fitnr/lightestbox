!function(){"use strict";function lightestbox(element,opts){var defaults={prefix:"ltbx",maxWidth:1/0,useTitle:!0},self=this;self.options=opts||{};for(var property in defaults)defaults.hasOwnProperty(property)&&!self.options.hasOwnProperty(property)&&(self.options[property]=defaults[property]);return self._wrapper=self.createWrapper(),element.addEventListener("click",self.show),doc.addEventListener("keypress",function(ev){27===ev.key&&self.hide()}),this._wrapper.addEventListener("click",self.hide),window.addEventListener("resize",self.sizeWrapper),self}/*!
        Lightestbox - dependency free lightboxes
        http://github.com/fitnr/lightestbox
        Copyright (C) 2015-6 Neil Freeman
        @license GPL v3
    */
var doc=window.document;Lightestbox.prototype.sizeFigure=function(img){var w=img.width,h=img.height,max=Math.min(this.options.maxWidth,this.wrapper().style.width.replace("px","")),figure=this.figure();figure.style.width=(max>w?w:max)+"px",figure.style.height=(max>w?h:max/w*h)+"px"},Lightestbox.prototype.wrapper=function(){return this._wrapper},Lightestbox.prototype.figure=function(){return this.wrapper().getElementById("lightbox-figure")},Lightestbox.prototype.show=function(elem,event){var src=elem.href||elem.dataset.img||!1;if(!src)return!1;var wrapper=this.wrapper(),figure=this.figure(),loading=wrapper.getElementsByTagName("div").item(0),caption=figure.getElementsByTagName("figcaption").item(0);figure.style.display="none",wrapper.style.display=loading.style.display="block";var captiontext=this.options.useTitle?elem.title:elem.dataset.caption;captiontext?(caption.style.display="block",caption.innerHTML=captiontext):(caption.style.display="none",caption.innerHTML="");var img=figure.getElementsByTagName("img").item(0)||doc.createElement("img");img.addEventListener("load",this.sizeFigure.bind(this)),img.addEventListener("load",function(){figure.style.display="block"}),img.src=src,figure.insertBefore(img,caption),event.preventDefault()},Lightestbox.prototype.hide=function(){var figure=this.figure();this.wrapper().style.display="none",figure.removeChild(figure.getElementsByTagName("img").item(0)),doc.removeEventListener("keypress",this.escListener)},Lightestbox.prototype.sizeWrapper=function(){var wrapper=this.wrapper();wrapper.style.width=window.innerWidth+"px",wrapper.style.height=window.innerHeight+"px"},Lightestbox.prototype.createWrapper=function(){var wrapper=doc.createElement("div"),figure=doc.createElement("figure"),loading=doc.createElement("div"),loader=doc.createElement("div");return wrapper.className=this.options.prefix+"-wrapper",wrapper.id=this.options.prefix+"-wrapper",this.sizeWrapper(),loading.className=this.options.prefix+"-loading",wrapper.appendChild(loading),wrapper.appendChild(figure),loader.innerText="Loading...",loading.appendChild(loader),figure.id="lightbox-figure",figure.appendChild(doc.createElement("figcaption")),doc.body.appendChild(wrapper),wrapper},function($){$.fn.lightestbox=function(options){var L=new lightestbox(options);return this.each(function(){L.add(this)})}}(jQuery)}();
