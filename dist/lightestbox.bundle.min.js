var Lightestbox=function(){"use strict";function Lightestbox(elements,opts){var defaults={prefix:"ltbx",maxWidth:1/0,useTitle:!0},self=this;self.options=opts||{};for(var property in defaults)defaults.hasOwnProperty(property)&&!self.options.hasOwnProperty(property)&&(self.options[property]=defaults[property]);return self._wrapper=self.createWrapper(),self.add(elements||[]),doc.addEventListener("keypress",function(ev){27===ev.key&&self.hide()}),this._wrapper.addEventListener("click",self.hide.bind(self)),self}/*!
        Lightestbox - dependency free lightboxes
        http://github.com/fitnr/lightestbox
        Copyright (C) 2015-6 Neil Freeman
        @license GPL v3
    */
var doc=window.document;return Lightestbox.prototype.sizeFigure=function(img){var w=img.width,h=img.height,max=Math.min(this.options.maxWidth,window.innerWidth),figure=this.figure();figure.style.width=Math.min(w,max)+"px",figure.style.height=(max>w?h:max/w*h)+"px"},Lightestbox.prototype.figure=function(){return this._wrapper.getElementsByTagName("figure").item(0)},Lightestbox.prototype.show=function(event){var elem=event.target,src=elem.getAttribute("href")||elem.dataset.img||!1;if(!src)return!1;var self=this,wrapper=self._wrapper,figure=self.figure(),loading=wrapper.getElementsByTagName("div").item(0),caption=figure.getElementsByTagName("figcaption").item(0);figure.style.display="none",wrapper.style.display=loading.style.display="block";var captiontext=self.options.useTitle?elem.title:elem.dataset.caption;captiontext?(caption.style.display="block",caption.innerHTML=captiontext):(caption.style.display="none",caption.innerHTML="");var img=figure.getElementsByTagName("img").item(0)||doc.createElement("img");img.addEventListener("load",function(){self.sizeFigure(img),figure.style.display="block"}),img.src=src,figure.insertBefore(img,caption),event.preventDefault()},Lightestbox.prototype.hide=function(){var figure=this.figure();this._wrapper.style.display="none",figure.removeChild(figure.getElementsByTagName("img").item(0))},Lightestbox.prototype.createWrapper=function(){var wrapper=doc.createElement("div"),figure=doc.createElement("figure"),loading=doc.createElement("div"),loader=doc.createElement("div"),prefix=this.options.prefix;return wrapper.className=prefix+"-wrapper",wrapper.id=prefix+"-wrapper",loading.className=prefix+"-loading",wrapper.appendChild(loading),wrapper.appendChild(figure),loader.innerText="Loading...",loading.appendChild(loader),figure.appendChild(doc.createElement("figcaption")),doc.body.appendChild(wrapper),wrapper},Lightestbox.prototype.add=function(elements){try{var show=this.show.bind(this);Array.prototype.map.call(elements,function(el){el.addEventListener("click",show)})}catch(e){console.error(e)}return this},Lightestbox}();
