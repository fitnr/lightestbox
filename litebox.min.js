/*!
  http://github.com/fitnr/litebox
  Concept reworked from Lokesh Dhakar, 2005-2006 http://huddletogether.com/projects/lightbox/ Creative Commons Attribution 2.5 License - http://creativecommons.org/licenses/by/2.5/
*/
!function(e,t){typeof module!="undefined"?module.exports=t():typeof define=="function"&&typeof define.amd=="object"?define(t):this[e]=t()}("litebox",function(){function t(e){e.key===27&&hideLitebox()}function n(e,t){var n={prefix:"litebox",maxWidth:Infinity,useTitle:!0};this.options=typeof t=="object"?t:{};for(var r in n)n.hasOwnProperty(r)&&!this.options.hasOwnProperty(r)&&(this.options[r]=n[r]);this._wrapper=null,this._figure=null,this.captionheight=0,e&&this.attach(e)}var e=window.document;return n.prototype.setFigureDims=function(e){var t=e.width,n=e.height;this.figure.style.width=t<options.MaxWidth?t:options.MaxWidth,this.figure.style.height=(t<options.MaxWidth?n:options.MaxWidth/t*n)+this.captionHeight},n.prototype.wrapper=function(){return this._wrapper||this.create()},n.prototype.figure=function(){return this._figure||this.wrapper().getElementsByTagName("figure").item(0)},n.prototype.show=function(n){var r=this.wrapper(),i=this.figure(),s=r.getElementsByTagName("div").item(0),o=r.getElementsByTagName("figcaption").item(0);i.style.display="none",r.style.display=s.style.display="block";var u=this.options.useTitle?n.getAttribute("title"):n.dataset.caption;u?(o.style.display="block",o.innerText=n.getAttribute("title"),this.captionHeight=getComputedStyle(r.height.replace("px",""))):(o.style.display="none",this.captionHeight=0);var a=e.createElement("img");a.addEventListener("load",this.setFigureDims),a.addEventListener("load",function(){this.figure.style.display="block"}),r.getElementsByTagName("figure").item(0).insertBefore(a,o),a.src=n.href,e.addEventListener("keypress",t)},n.prototype.hide=function(){this.wrapper.style.display="none",this.wrapper.removeChild(this.wrapper.getElementsByTagName("img").item(0)),e.removeEventListener("keypress",t)},n.prototype.create=function(){this._wrapper=e.createElement("div"),this._wrapper.className=options.namespace+"-overlay",this._wrapper.addEventListener("click",hideLitebox),this._wrapper.style.width=window.innerWidth+"px",this._wrapper.style.height=window.innerHeight+"px",e.body.insertBefore(this._wrapper,e.body.firstChild);var t=e.createElement("div");t.className=options.namespace+"-loading",this._wrapper.appendChild(t),loader=e.createElement("div"),loader.innerText="Loading...",t.appendChild(loader);var n=e.createElement("figure");return this._wrapper.appendChild(n),n.appendChild(e.createElement("figcaption")),this._wrapper},n.prototype.attach=function(e){e.addEventListener("click",function(t){return this.show(e),console.log(t),t.preventDefault(),!1})},n})