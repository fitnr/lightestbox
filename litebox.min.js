!function(e,t){"undefined"!=typeof module?module.exports=t():"function"==typeof define&&"object"==typeof define.amd?define(t):this[e]=t()}("litebox",function(){function e(e){return function(t){27===t.key&&e.hide()}}function t(e,t,i){var r=this,n=function(t){return i.call(r,e,t)};e.addEventListener(t,n)}function i(t,i){var r={prefix:"litebox",maxWidth:1/0,useTitle:!0};this.options="object"==typeof i?i:{};for(var n in r)r.hasOwnProperty(n)&&!this.options.hasOwnProperty(n)&&(this.options[n]=r[n]);return this._wrapper=null,this._figure=null,this.escListener=e(this),t&&this.attach(t),this}var r=window.document;return i.prototype.sizeFigure=function(e){var t=e.width,i=e.height,r=this.options.maxWidth,n=this.figure();n.style.width=(r>t?t:r)+"px",n.style.height=(r>t?i:r/t*i)+"px"},i.prototype.wrapper=function(){return this._wrapper||this.create()},i.prototype.figure=function(){return this._figure||this.wrapper().getElementsByTagName("figure").item(0)},i.prototype.show=function(e,i){var n=this.wrapper(),s=this.figure(),p=n.getElementsByTagName("div").item(0),a=s.getElementsByTagName("figcaption").item(0);i.preventDefault(),s.style.display="none",n.style.display=p.style.display="block";var o=e.getAttribute("title"),h=this.options.useTitle?o:e.dataset.caption;h?(a.style.display="block",a.innerText=h):(a.style.display="none",a.innerText="");var l=r.createElement("img");t.call(this,l,"load",this.sizeFigure),t.call(this,l,"load",function(){s.style.display="block"}),s.insertBefore(l,a),l.src=e.href,r.addEventListener("keypress",this.escListener)},i.prototype.hide=function(){var e=this.figure();this.wrapper().style.display="none",e.removeChild(e.getElementsByTagName("img").item(0)),r.removeEventListener("keypress",this.escListener)},i.prototype.sizeWrapper=function(){var e=this.wrapper();e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px"},i.prototype.create=function(){this._wrapper=r.createElement("div"),this._wrapper.className=this.options.prefix+"-wrapper",this.sizeWrapper(),t.call(this,this._wrapper,"click",this.hide),t.call(this,window,"resize",this.sizeWrapper),r.body.insertBefore(this._wrapper,r.body.firstChild);var e=r.createElement("div");return e.className=this.options.prefix+"-loading",this._wrapper.appendChild(e),loader=r.createElement("div"),loader.innerText="Loading...",e.appendChild(loader),this._figure=r.createElement("figure"),this._wrapper.appendChild(figure),this._figure.appendChild(r.createElement("figcaption")),this._wrapper},i.prototype.attach=function(e){t.call(this,e,"click",this.show)},i});